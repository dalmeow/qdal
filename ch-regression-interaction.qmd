# Regression models: interactions {#sec-regression-interaction}

![](https://img.shields.io/badge/Area-Statistics-red) ![](https://img.shields.io/badge/Area-R-green)

```{r}
#| label: setup
#| include: false

library(tidyverse)
theme_set(theme_light())
library(brms)
```

```{r}
#| label: polite
#| message: false

polite <- read_csv("data/winter2012/polite.csv")
```

```{r}
#| label: f0-bm-int

f0_bm_int <- brm(
  f0mn ~ gender + attitude + gender:attitude,
  family = gaussian,
  data = polite,
  cores = 4,
  seed = 7123,
  file = "cache/ch-regression-interaction_f0_bm_int"
)
```

```{r}
#| label: f0-bm-int-summary

summary(f0_bm_int)

```

```{r}
#| label: f0-bm-int-cond
conditional_effects(f0_bm_int, "gender:attitude")
```

```{r}
#| label: f0-bm-int-draws

f0_bm_int_draws <- as_draws_df(f0_bm_int)
```

```{r}
#| label: f0-bm-int-draws-2

f0_bm_int_draws <- f0_bm_int_draws |> 
  mutate(
    f_inf = b_Intercept,
    f_pol = b_Intercept + b_attitudepol,
    m_inf = b_Intercept + b_genderM,
    m_pol = b_Intercept + b_genderM + b_attitudepol + `b_genderM:attitudepol`
  )
```

```{r}
#| label: f0-bm-int2-draws-summarise

library(posterior)

f0_bm_int_draws |> 
  mutate(
    m_pol_inf = m_pol - m_inf
  ) |> 
  summarise(
    mean_diff = mean(m_pol_inf), sd_diff = sd(m_pol_inf),
    lo_diff = quantile2(m_pol_inf, probs = 0.025), hi_diff = quantile2(m_pol_inf, probs = 0.975)
  ) |>
  round()
```

